---
title: CF577B Modulo Sum
date: 2021-12-20 19:17:02
tags:
  - DP
  - 数学
categories: 题解
author: Mr_Stranger_CW
mathjax: true
---

题意：给定$n,m(n \leq 10^6 m\leq 10^3)$和一个长度为$ n $的数列。求是否能够通过选择该序列的某一个自己，以令该子集的元素和可以被$m$整除。

看到这个选取子集，当时想到了三种做法。

一：大力搜索

二：状态压缩

三：可行性背包

稍微带点脑子思考一下，前两种。。。。。再见。直接开始考虑可行性背包的做法。

设$dp[i][j]$表示前$i$个元素中能否有选取方法使得他们对$m$取模得到$j$。

易得递推式：$dp[i][j]\ |=dp[i-1][j],\ \ \ \ dp[i][j+a[i]]\ |=dp[i][j]$。

最后的答案自然就是就是$|^{n}_{i-0}dp[i][0]$。

这个时候看一下数据范围，$nm=10^9$，内存的话滚动优化，时间。。。啊。。。。。真不戳啊$\Theta(nm)$看起来会炸。

这个时候考虑优化，但是背包的复杂度放在那里，优化也不是很好写，能优化的话早就有人干了。

这个时候考虑换条路，既然没办法优化核心代码的复杂度，那么我们就想办法压缩数据范围。

观察一下，如果我们按照区间选取元素的话，一段连续的区间的元素和正是两个前缀和相减的结果。

我们令$Sum_i=\sum\limits_{j=1}^i{a_j}$

根据 **~~小学数学中的~~** 抽屉原理， 我们知道如果要有$m  < n$的话， 一共会有$n$个前缀和，这$n$个前缀和中一定会有两个同余。这个时候一定有合法的方案满足题目条件。

然后来看$n\leq m$的情况，观察数据范围，此时$n\leq m\leq10^3$，直接背包有手就行。

P.S. 遇到一些离谱的数据的时候如果没有办法优化核心可以选择用一些 **~~离谱~~** 的方法去压缩数据，例：抽屉原理，容斥，打表找规律。**~~真·从源头上解决问题~~**

其实$CF$还有一道类似的，$CF850A\ Five\ Dimensional\ Points$。

题面大意是给定五维空间里的$n$个点，判断那些点$A$不存在另外两个点$BC$使得$\angle BCA$是锐角。

这题实际上就是$\Theta(n^3)$的暴力，不过$10^3$的范围还是很难受的，这个时候抽屉原理可得当$n>34$的时候，至少一个象限会出现$2$个点，以此压缩范围。